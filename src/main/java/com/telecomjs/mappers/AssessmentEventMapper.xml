<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.telecomjs.mappers.AssessmentEventMapper" >
  <resultMap id="BaseResultMap" type="com.telecomjs.beans.AssessmentEvent" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="EVENT_ID" property="eventId" jdbcType="DECIMAL" />
    <result column="BILLING_CYCLE_ID" property="billingCycleId" jdbcType="DECIMAL" />
    <result column="FILE_NAME" property="fileName" jdbcType="VARCHAR" />
    <result column="STAFF_ID" property="staffId" jdbcType="DECIMAL" />
    <result column="RECORD_ROW" property="recordRow" jdbcType="DECIMAL" />
    <result column="AMOUNT" property="amount" jdbcType="DECIMAL" />
    <result column="STATE_DATE" property="stateDate" jdbcType="TIMESTAMP" />
    <result column="CREATE_DATE" property="createDate" jdbcType="TIMESTAMP" />
    <result column="STATE" property="state" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    EVENT_ID, BILLING_CYCLE_ID, FILE_NAME, STAFF_ID, RECORD_ROW, AMOUNT, STATE_DATE, 
    CREATE_DATE, STATE
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from ASSESSMENT_EVENT
    where EVENT_ID = #{eventId,jdbcType=DECIMAL}
  </select>
  <select id="getPrimaryKey" resultType="java.lang.Integer">
    SELECT SEQ_ASSESSMENT_EVENT_ID.nextval from dual
  </select>
  <select id="findAll" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List" />
    FROM ASSESSMENT_EVENT order by event_id
  </select>
  <select id="countEventsByCycle" resultType="java.lang.Integer">
    SELECT count(1) from ASSESSMENT_EVENT
    where  BILLING_CYCLE_ID = #{billingCycleId}
    and    state != 'CLS'
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from ASSESSMENT_EVENT
    where EVENT_ID = #{eventId,jdbcType=DECIMAL}
  </delete>
  <insert id="insert" parameterType="com.telecomjs.beans.AssessmentEvent" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ASSESSMENT_EVENT (EVENT_ID, BILLING_CYCLE_ID, FILE_NAME, 
      STAFF_ID, RECORD_ROW, AMOUNT, 
      STATE_DATE, CREATE_DATE, STATE
      )
    values (#{eventId,jdbcType=DECIMAL}, #{billingCycleId,jdbcType=DECIMAL}, #{fileName,jdbcType=VARCHAR}, 
      #{staffId,jdbcType=DECIMAL}, #{recordRow,jdbcType=DECIMAL}, #{amount,jdbcType=DECIMAL}, 
      #{stateDate,jdbcType=TIMESTAMP}, #{createDate,jdbcType=TIMESTAMP}, #{state,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.telecomjs.beans.AssessmentEvent" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ASSESSMENT_EVENT
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="eventId != null" >
        EVENT_ID,
      </if>
      <if test="billingCycleId != null" >
        BILLING_CYCLE_ID,
      </if>
      <if test="fileName != null" >
        FILE_NAME,
      </if>
      <if test="staffId != null" >
        STAFF_ID,
      </if>
      <if test="recordRow != null" >
        RECORD_ROW,
      </if>
      <if test="amount != null" >
        AMOUNT,
      </if>
      <if test="stateDate != null" >
        STATE_DATE,
      </if>
      <if test="createDate != null" >
        CREATE_DATE,
      </if>
      <if test="state != null" >
        STATE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="eventId != null" >
        #{eventId,jdbcType=DECIMAL},
      </if>
      <if test="billingCycleId != null" >
        #{billingCycleId,jdbcType=DECIMAL},
      </if>
      <if test="fileName != null" >
        #{fileName,jdbcType=VARCHAR},
      </if>
      <if test="staffId != null" >
        #{staffId,jdbcType=DECIMAL},
      </if>
      <if test="recordRow != null" >
        #{recordRow,jdbcType=DECIMAL},
      </if>
      <if test="amount != null" >
        #{amount,jdbcType=DECIMAL},
      </if>
      <if test="stateDate != null" >
        #{stateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="state != null" >
        #{state,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.telecomjs.beans.AssessmentEvent" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ASSESSMENT_EVENT
    <set >
      <if test="billingCycleId != null" >
        BILLING_CYCLE_ID = #{billingCycleId,jdbcType=DECIMAL},
      </if>
      <if test="fileName != null" >
        FILE_NAME = #{fileName,jdbcType=VARCHAR},
      </if>
      <if test="staffId != null" >
        STAFF_ID = #{staffId,jdbcType=DECIMAL},
      </if>
      <if test="recordRow != null" >
        RECORD_ROW = #{recordRow,jdbcType=DECIMAL},
      </if>
      <if test="amount != null" >
        AMOUNT = #{amount,jdbcType=DECIMAL},
      </if>
      <if test="stateDate != null" >
        STATE_DATE = #{stateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="createDate != null" >
        CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="state != null" >
        STATE = #{state,jdbcType=VARCHAR},
      </if>
    </set>
    where EVENT_ID = #{eventId,jdbcType=DECIMAL}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.telecomjs.beans.AssessmentEvent" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ASSESSMENT_EVENT
    set BILLING_CYCLE_ID = #{billingCycleId,jdbcType=DECIMAL},
      FILE_NAME = #{fileName,jdbcType=VARCHAR},
      STAFF_ID = #{staffId,jdbcType=DECIMAL},
      RECORD_ROW = #{recordRow,jdbcType=DECIMAL},
      AMOUNT = #{amount,jdbcType=DECIMAL},
      STATE_DATE = #{stateDate,jdbcType=TIMESTAMP},
      CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
      STATE = #{state,jdbcType=VARCHAR}
    where EVENT_ID = #{eventId,jdbcType=DECIMAL}
  </update>
  <update id="closeEvent" parameterType="Integer">
    UPDATE ASSESSMENT_EVENT
    SET state='CLS',state_date=sysdate
    WHERE event_id=#{eventId} and state in ('INI','OPN')
  </update>
  <update id="reportEvent" parameterType="Integer">
    UPDATE ASSESSMENT_EVENT
    SET state='REP',state_date=sysdate
    WHERE event_id=#{eventId} and state in ('OPN')
  </update>
</mapper>